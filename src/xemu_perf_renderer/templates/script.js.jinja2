import {expandData} from "./data.js";
import {initializeApp} from "./app.js";


document.addEventListener("DOMContentLoaded", async function () {
    const loadingContainer = document.getElementById("loading-container");
    const chartsContainer = document.getElementById("charts-container");

    function displayError(error) {
        console.error('Failed to load performance data:', error);
        loadingContainer.innerHTML = '<p style="color: red;">Error: Could not load data.</p>';
    }

     try {
        const response = await fetch("{{ results_filename }}");
        if (!response.ok) {
            displayError(`Data load failed: HTTP ${response.status}`)
            return;
        }

        const data = expandData(await response.json());

        loadingContainer.style.display = 'none';
        chartsContainer.style.display = 'block';

        initializeApp(data);
    } catch (error) {
        displayError(error);
    }
});

